{
  "$schema": "./schemas/global-config.schema.json",
  "version": "2.0.0",
  "name": "Consumer Portals Global Configuration",
  "description": "Centralized configuration for shared rules across the monorepo",
  
  "architecture": {
    "type": "turborepo-monorepo",
    "packageManager": "pnpm@10.5.2",
    "nodeVersion": ">=18.0.0",
    "structure": {
      "apps": ["apps/*"],
      "packages": ["packages/*"],
      "docs": ["docs/*"],
      "scripts": ["scripts/*"]
    }
  },

  "codingStandards": {
    "typescript": {
      "version": "^5.8.2",
      "strict": true,
      "baseConfig": "@portals/tsconfig",
      "moduleResolution": "bundler",
      "target": "ES2022",
      "lib": ["DOM", "DOM.Iterable", "ES2022"]
    },
    "eslint": {
      "version": "^8.57.1",
      "baseConfig": "@portals/eslint-config",
      "rules": {
        "naming": "kebab-case-files",
        "imports": "absolute-paths-preferred",
        "complexity": "max-10",
        "accessibility": "enforce-jsx-a11y"
      }
    },
    "prettier": {
      "version": "^3.5.3",
      "config": {
        "semi": false,
        "singleQuote": true,
        "trailingComma": "es5",
        "tabWidth": 2,
        "printWidth": 80,
        "arrowParens": "avoid",
        "endOfLine": "lf"
      }
    }
  },

  "versionControl": {
    "workflow": "branch-based",
    "branchNaming": {
      "feature": "feature/PRT-{number}-{description}",
      "bugfix": "fix/PRT-{number}-{description}",
      "docs": "docs/PRT-{number}-{description}",
      "chore": "chore/PRT-{number}-{description}"
    },
    "hooks": {
      "preCommit": ["lint-staged"],
      "commitMsg": "commitizen",
      "prePush": ["test:unit", "typecheck"]
    },
    "lintStaged": {
      "*.{ts,tsx,js,jsx}": ["eslint --fix", "prettier --write"],
      "*.{json,md,yml,yaml}": ["prettier --write"],
      "*.{css,scss}": ["prettier --write"]
    },
    "commitizen": {
      "path": "cz-conventional-changelog"
    }
  },

  "security": {
    "envVars": {
      "required": ["NODE_ENV"],
      "example": ".env.example",
      "validation": "zod-schemas"
    },
    "dependencies": {
      "audit": "weekly",
      "autoUpdate": "patch-only",
      "vulnerabilityCheck": "ci-required"
    },
    "headers": {
      "contentSecurityPolicy": true,
      "xFrameOptions": "DENY",
      "xContentTypeOptions": "nosniff",
      "referrerPolicy": "strict-origin-when-cross-origin",
      "hsts": true
    }
  },

  "performance": {
    "caching": {
      "turborepo": true,
      "nextjs": true,
      "strategy": "aggressive"
    },
    "bundleAnalysis": {
      "enabled": true,
      "maxSize": "500KB",
      "alertThreshold": "600KB",
      "treeshaking": true
    },
    "monitoring": {
      "webVitals": true,
      "lighthouse": "ci-required",
      "corePerfMetrics": ["LCP", "FID", "CLS", "TTFB"]
    },
    "optimization": {
      "imageOptimization": true,
      "fontOptimization": true,
      "codesplitting": "automatic",
      "lazyLoading": true
    }
  },

  "testing": {
    "framework": "jest",
    "coverage": {
      "threshold": 80,
      "required": ["branches", "functions", "lines", "statements"]
    },
    "e2e": "playwright",
    "visualRegression": "chromatic",
    "testTypes": ["unit", "integration", "e2e", "accessibility"]
  },

  "deployment": {
    "environments": ["development", "staging", "production"],
    "ci": "azure-pipelines",
    "strategy": "blue-green",
    "rollback": "automated"
  },

  "documentation": {
    "api": "openapi",
    "components": "storybook",
    "architecture": "c4-model",
    "runbooks": "confluence",
    "codeDocumentation": "tsdoc"
  },

  "interoperability": {
    "api": {
      "style": "rest",
      "format": "json",
      "versioning": "semantic",
      "cors": "configured",
      "rateLimit": "enabled"
    },
    "contracts": {
      "validation": "zod",
      "generation": "openapi-codegen",
      "testing": "contract-testing"
    }
  },

  "modernization": {
    "react": {
      "version": "^19.0.0",
      "features": ["concurrent", "server-components", "suspense"]
    },
    "nextjs": {
      "version": "^15.1.0",
      "appRouter": true,
      "features": ["app-dir", "turbopack", "server-actions"]
    },
    "styling": {
      "framework": "tailwindcss",
      "version": "^3.4.0",
      "features": ["jit", "dark-mode", "container-queries"]
    }
  }
} 